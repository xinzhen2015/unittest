# unnitest ä¸­æ–‡æ–‡æ¡£ ï¼ˆUnit testing frameworkï¼‰
***

unittest æ¡†æ¶ä¸­æ–‡æ–‡æ¡£ï¼Œèµ·å› æ˜¯çœ‹åˆ°å®˜æ–¹æ–‡æ¡£æœ‰Englishã€Frenchã€Japaneseã€Koreanï¼Œå”¯ç‹¬æ²¡æœ‰Chineseï¼Œè¿™å°±å¾ˆä¸çˆ½äº†ã€‚  

ğŸ‡¨ğŸ‡³  
æœ¬æ–‡ï¼šå°Šé‡åŸåˆ›ï¼Œç¿»è¯‘éµå¾ªä¿¡è¾¾é›…ã€‚   
ğŸ‡¨ğŸ‡³   

Pythonç‰ˆæœ¬ï¼š3.7.1

[unittestå®˜æ–¹è‹±æ–‡æ–‡æ¡£](https://docs.python.org/3/library/unittest.html#test-discovery)
***

# unnitest--å•å…ƒæµ‹è¯•æ¡†æ¶
## Source codeï¼š[Lib/unittest/__init__.py](https://github.com/python/cpython/blob/3.7/Lib/unittest/__init__.py)  

(äº²çˆ±çš„ï¼Œå¦‚æœä½ å¯¹æµ‹è¯•æ¦‚å¿µå·²ç»æœ‰æ‰€äº†è§£ï¼Œè¯·ç›´æ¥è·³åˆ° [æ–­è¨€æ–¹æ³•åˆ—è¡¨](https://docs.python.org/3/library/unittest.html#assert-methods)ã€‚ğŸŒ¹)

unittest å•å…ƒæ¡†æ¶æœ€åˆçš„çµæ„Ÿæ¥è‡ªäºJUnitï¼Œå®ƒå’Œå…¶ä»–è¯­è¨€ä¸­çš„å•å…ƒæµ‹è¯•æ¡†æ¶æœ‰ç€ç›¸ä¼¼çš„éŸµå‘³ã€‚ä¾‹å¦‚å®ƒæ”¯æŒè‡ªåŠ¨åŒ–æµ‹è¯•ã€å…±äº«æµ‹è¯•çš„è®¾ç½®å’Œå…³é—­ä»£ç ã€å°†æµ‹è¯•èšåˆåˆ°é›†åˆä¸­ï¼Œä»¥åŠæµ‹è¯•ä¸æŠ¥å‘Šæ¡†æ¶çš„ç‹¬ç«‹æ€§ã€‚  

ä¸ºæ­¤ï¼Œunittestä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼æ”¯æŒå¦‚ä¸‹æ¦‚å¿µï¼š

**æµ‹è¯•å¤¹ï¼š**

```
æ³¨ï¼šæµ‹è¯•å¤¹ï¼ˆFixtureï¼‰ æŒ‡çš„æ˜¯æµ‹è¯•ä¸­ä¾èµ–çš„æ•°æ®å’Œæ¡ä»¶ç­‰ç­‰ï¼Œunittestæä¾›å¯¹Fixtureçš„æ”¯æŒã€‚
```
æµ‹è¯•å¤¹æ˜¯æŒ‡æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªæµ‹è¯•ä»»åŠ¡æ‰€éœ€è¦çš„å‡†å¤‡å·¥ä½œï¼Œä»¥åŠä»»ä½•ç›¸å…³è”çš„æ¸…ç†æ“ä½œã€‚è¿™å¯èƒ½åŒ…æ‹¬ï¼Œä¾‹å¦‚ï¼Œåˆ›å»ºä¸´æ—¶æˆ–ä»£ç†æ•°æ®åº“ã€åˆ›å»ºç›®å½•æˆ–å¯åŠ¨æœåŠ¡å™¨è¿›ç¨‹ã€‚

**æµ‹è¯•ç”¨ä¾‹ï¼š**

ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å•å…ƒæµ‹è¯•ï¼Œå®ƒæ£€æŸ¥å¯¹ç‰¹å®šè¾“å…¥é›†çš„ç‰¹å®šå“åº”ã€‚unittestæä¾›äº†ä¸€ä¸ªåŸºç±»ï¼ˆ[TestCase](https://docs.python.org/3/library/unittest.html#unittest.TestCase)ï¼‰ï¼Œèƒ½å¤Ÿç”¨ä»–å»åˆ›å»ºæ–°çš„æµ‹è¯•ç”¨ä¾‹ã€‚

**æµ‹è¯•å¥—ä»¶ï¼š**  

æµ‹è¯•å¥—ä»¶æ˜¯æµ‹è¯•ç”¨ä¾‹æˆ–è€…æµ‹è¯•å¥—ä»¶æœ¬èº«çš„é›†åˆï¼Œä¹Ÿå¯ä»¥æ˜¯æµ‹è¯•ç”¨ä¾‹å’Œæµ‹è¯•å¥—ä»¶çš„æ··åˆé›†åˆï¼Œå®ƒæŠŠè¦æ‰§è¡Œçš„æµ‹è¯•æ±‡èšèµ·æ¥ã€‚  

**æµ‹è¯•è¿è¡Œå™¨**  

æµ‹è¯•è¿è¡Œå™¨æ˜¯ç”¨äºç¼–æ’æµ‹è¯•ç”¨ä¾‹ï¼Œä»¥åŠå‘ç”¨æˆ·å±•ç¤ºæµ‹è¯•ç»“æœã€‚è¿è¡Œå™¨å¯ä»¥ä½¿ç”¨å›¾å½¢ç•Œé¢ã€æ–‡æœ¬ç•Œé¢ï¼Œæˆ–è€…æ˜¯è¿”å›ç‰¹å®šçš„å€¼å»å±•ç¤ºæ‰§è¡Œåçš„æµ‹è¯•ç»“æœã€‚

```
è¯·å‚é˜…ï¼š
doctestæ¨¡å—(https://docs.python.org/3/library/doctest.html#module-doctest)ï¼š
  å¦å¤–ä¸€ç§å…·æœ‰ç‹¬ç‰¹éŸµå‘³çš„æµ‹è¯•æ”¯æŒæ¨¡å—ã€‚

Simple Smalltalk Testing: With Patternsï¼ˆhttps://web.archive.org/web/20150315073817/http://www.xprogramming.com/testfram.htmï¼‰
  Kent Beck çš„åŸè®ºæ–‡ï¼Œè¿ç”¨æ¨¡å¼åœ¨æµ‹è¯•æ¡†æ¶ä¸Šï¼Œè¢«unittestå…±äº«ã€‚

Nose and py.test
  ä½¿ç”¨è½»é‡çº§çš„è¯­æ³•æ¥ç¼–å†™æµ‹è¯•ç”¨ä¾‹çš„ç¬¬ä¸‰æ–¹å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚
  ä¾‹å¦‚ï¼šassert func(10) == 42

The Python Testing Tools Taxonomyï¼ˆhttps://wiki.python.org/moin/PythonTestingToolsTaxonomyï¼‰
  ä¸€å¼ å·¨å¤§çš„Pythonæµ‹è¯•å·¥å…·åˆ—è¡¨ï¼ŒåŒ…æ‹¬åŠŸèƒ½æµ‹è¯•æ¡†æ¶ä»¥åŠæ¨¡æ‹Ÿå¯¹è±¡åº“ã€‚

Pythonæºä»£ç  Tools/unittestgui/unittestgui.py ä¸­çš„è„šæœ¬æ˜¯ä¸€ä¸ªå›¾åƒç•Œé¢å·¥å…·ï¼Œç”¨äºæµ‹è¯•è°ƒè¯•å’Œæ‰§è¡Œã€‚è¿™å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ä¸ºäº†æ–¹ä¾¿æ–°æ‰‹ç”¨æˆ·å†™æµ‹è¯•ç”¨ä¾‹ã€‚
å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œå»ºè®®æµ‹è¯•ç”¨ä¾‹è¿è¡Œåœ¨æŒç»­é›†æˆç³»ç»Ÿï¼Œä¾‹å¦‚ Jenkinsã€Buidlbotã€Hudsonã€‚

```

## åŸºæœ¬ä¾‹å­

unittestæ¨¡å—ä¸ºç”¨æˆ·æ„å»ºå’Œæ‰§è¡Œæµ‹è¯•ç”¨ä¾‹æä¾›äº†ä¸€ç»„ä¸°å¯Œçš„å·¥å…·ã€‚æœ¬èŠ‚æ¼”ç¤ºä¸€å°éƒ¨åˆ†å·¥å…·ï¼Œè¶³ä»¥æ»¡è¶³å¤§éƒ¨åˆ†ç”¨æˆ·çš„éœ€æ±‚ã€‚

ä»¥ä¸‹ç®€çŸ­çš„è„šæœ¬ï¼Œç”¨äºæµ‹è¯•å­—ç¬¦ä¸²çš„ä¸‰ä¸ªæ–¹æ³•ï¼š

```python
import unittest

class TestStringMethods(unittest.TestCase):

    def test_upper(self):
        self.assertEqual('foo'.upper(), 'FOO')

    def test_isupper(self):
        self.assertTrue('FOO'.isupper())
        self.assertFalse('Foo'.isupper())

    def test_split(self):
        s = 'hello world'
        self.assertEqual(s.split(), ['hello', 'world'])
        # check that s.split fails when the separator is not a string
        with self.assertRaises(TypeError):
            s.split(2)

if __name__ == '__main__':
    unittest.main()

```
testcaseæ˜¯é€šè¿‡å­ç±»åŒ–unittesttest.testcaseåˆ›å»ºçš„ã€‚ä¸Šé¢ä»£ç ä¸­çš„ä¸‰ä¸ªç‹¬ç«‹æµ‹è¯•ç”¨ä¾‹ï¼Œç”¨ä¾‹åå­—åˆ†åˆ«éƒ½æ˜¯ä»¥testå¼€å¤´å®šä¹‰çš„ï¼Œè¿™æ ·çš„å‘½åæ–¹å¼å‘Šè¯‰è¿è¡Œå™¨å“ªäº›æ–¹æ³•è¡¨ç¤ºæµ‹è¯•ã€‚

æ¯æ¬¡æµ‹è¯•çš„å…³é”®æ˜¯è°ƒç”¨assertEqual()å»æ ¡éªŒé¢„æœŸç»“æœï¼›è°ƒç”¨assertTrue()å’ŒassertFalse()éªŒè¯æ¡ä»¶æ˜¯å¦æˆç«‹ï¼›æˆ–è€…æ˜¯è°ƒç”¨assertRaises()éªŒè¯æ˜¯å¦å¼•å‘ç‰¹å®šå¼‚å¸¸ã€‚ä»¥ä¸Šè¿™äº›æ–¹æ³•è¢«ç”¨æ¥æ›¿ä»£assertè¯­å¥ï¼Œå› æ­¤è¿è¡Œå™¨å¯ä»¥æ”¶é›†æ‰€æœ‰çš„ç»“æœå¹¶ç”ŸæˆæŠ¥å‘Šã€‚
